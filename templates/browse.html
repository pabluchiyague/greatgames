{% extends "base.html" %}
{% block title %}Browse Games - GreatGames{% endblock %}
{% block content %}
<div class="browse-container">
    <h1>Browse Games</h1>
    <form method="GET" class="filter-bar" style="display:flex; gap:10px; margin-bottom:20px;">
        <input type="text" name="q" placeholder="Search..." value="{{ current_query }}">
        <select name="genre">
            <option value="">All Genres</option>
            {% for g in genres %}
            <option value="{{ g.genre }}" {% if current_genre == g.genre %}selected{% endif %}>{{ g.genre }}</option>
            {% endfor %}
        </select>
        <select name="platform">
            <option value="">All Platforms</option>
            {% for p in platforms %}
            <option value="{{ p.platform }}" {% if current_platform == p.platform %}selected{% endif %}>{{ p.platform }}</option>
            {% endfor %}
        </select>
        <select name="sort">
            <option value="title" {% if current_sort == 'title' %}selected{% endif %}>Title</option>
            <option value="rating" {% if current_sort == 'rating' %}selected{% endif %}>Rating</option>
            <option value="year" {% if current_sort == 'year' %}selected{% endif %}>Year</option>
        </select>
        <button type="submit" class="btn btn-primary">Apply</button>
    </form>

    {% if games %}
	<div class="game-grid">
		{% for game in games %}
		<a href="{{ url_for('games.game_detail', game_id=game.id) }}" class="game-card">
			<div class="game-card-cover">
				<img src="{{ game.cover_image_url or url_for('static', filename='images/default_cover.jpg') }}" alt="{{ game.title }}">
			</div>
			<div class="game-card-info">
				<h3 class="game-card-title">{{ game.title }}</h3>
				<p class="game-card-meta">{{ game.genre }} | ‚≠ê {{ "%.1f"|format(game.average_rating) }}</p>
			</div>
		</a>
		{% endfor %}
	</div>
    {% else %}
    <p>No games found matching your criteria.</p>
    {% endif %}
</div>
{% endblock %}
